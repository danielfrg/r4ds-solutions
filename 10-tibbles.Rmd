---
title: "10 - Tibbles"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(tidyverse)
```

# 10.2 Creating Tibbles

Convert regular `data.frame` to a `tibble` and create a new `tibble`.

```{r}
as_tibble(iris)

tibble(
  x = 1:5, 
  y = 1, 
  z = x ^ 2 + y
)
```

```{r}
tribble(
  ~x, ~y, ~z,
  #--|--|----
  "a", 2, 3.6,
  "b", 1, 8.5
)
```

# 10.3 Tibble vs data.frame

The two main differences are printing and subsetting.

## 10.3.1 Priting

By default it only prints the first 10 rows but we can control this using `print()`

```{r, eval = FALSE}
nycflights13::flights %>% 
  print(n = 3, width = Inf)
```

## 10.3.2 Subsetting

This is how we can select specific columns:

- `df[[ name or posision ]]``
- `df$name`

```{r}
df <- tibble(
  x = runif(5),
  y = rnorm(5)
)

df$x
df[["x"]]
df[[1]]
```

We can also use this in a pipe using the `.` placeholder.

```{r}
df %>% .$x
df %>% .[["x"]]
```

# 10.4 Interacting with older code

We can also return to the classic R `data.frame`

```{r}
class(as.data.frame(df))

as.data.frame(df)
```

# 10.5  Exercises

1. How can you tell if an object is a tibble? (Hint: try printing mtcars, which is a regular data frame).

2. Compare and contrast the following operations on a data.frame and equivalent tibble. What is different? Why might the default data frame behaviours cause you frustration?

```{r}
df <- data.frame(abc = 1, xyz = "a")
df$x
df[, "xyz"]
df[, c("abc", "xyz")]
```

3. If you have the name of a variable stored in an object, e.g. var <- "mpg", how can you extract the reference variable from a tibble?

4. Practice referring to non-syntactic names in the following data frame by:

- Extracting the variable called 1.
- Plotting a scatterplot of 1 vs 2.
- Creating a new column called 3 which is 2 divided by 1.
- Renaming the columns to one, two and three.

```{r}
annoying <- tibble(
  `1` = 1:10,
  `2` = `1` * 2 + rnorm(length(`1`))
)
```

5. What does tibble::enframe() do? When might you use it?

6. What option controls how many additional column names are printed at the footer of a tibble?











